{% extends 'QLBH/base.html' %}
{% load static %}

{% block title %}
    <title>Danh sách đơn hàng</title>
{% endblock %}

{% block nav_item_donhang %}active{% endblock %}

{% block content %}
    <div class="container-fluid">

        <div class="h3 mb-2 text-gray-800 d-inline-flex">Danh sách đơn hàng</div>
        <div class="d-inline-flex m-0 p-0 float-right">
           <form action="{% url 'QLBH:dsdonhang' %}" id="viewoption" name="FormOption" method="post">
               {% csrf_token %}
               <div class="">
                   <select id="inputState" name="inputState" class="form-control form-control-custom" onchange="viewoption.submit()" required>
                       {% if filteroption == 'Tháng này' %}
                           <option selected>Tháng này</option>
                       {% else %}
                           <option>Tháng này</option>
                       {% endif %}
                       {% if filteroption == 'Tiếp nhận đơn' %}
                           <option selected>Tiếp nhận đơn</option>
                       {% else %}
                           <option>Tiếp nhận đơn</option>
                       {% endif %}
                       {% if filteroption == 'Đang thực hiện' %}
                           <option selected>Đang thực hiện</option>
                       {% else %}
                           <option>Đang thực hiện</option>
                       {% endif %}
                       {% if filteroption == 'Upsale' %}
                           <option selected>Upsale</option>
                       {% else %}
                           <option>Upsale</option>
                       {% endif %}
                       {% if filteroption == 'Chưa thanh toán' %}
                           <option selected>Chưa thanh toán</option>
                       {% else %}
                           <option>Chưa thanh toán</option>
                       {% endif %}
                       {% if filteroption == 'Tất cả đơn' %}
                           <option selected>Tất cả đơn</option>
                       {% else %}
                           <option>Tất cả đơn</option>
                       {% endif %}
                   </select>
    {#                           <label>Loại logo</label>#}
               </div>
           </form>
       </div>
    </div>

    <div class="container-fluid">

       <!-- Page Heading -->


       <!-- DataTales Example -->
       <div class="card shadow mb-4">
          <!-- <div class="card-header py-3"> -->
          <!-- <h6 class="m-0 font-weight-bold text-primary">DataTables Example</h6> -->
          <!-- </div> -->
          <div class="card-body">
             <div class="table-responsive">
{#                     Add them data-order='' de chan auto sort khi load trang data-order = ''#}
                <table class="table table-striped" id="dataTable" width="100%" cellspacing="0" >
                   <!--Table head-->
                   <thead>
                      <tr>

                         <th class="col-sm-1">Mã đơn</th>
                         <th class="col-sm-2">Tên logo</th>
                         <th class="col-sm-1">Loại đơn</th>
                         <th class="col-sm-1">Deadline</th>
                         <th class="col-sm-1">Tiến độ thực hiện</th>
                         <th class="col-sm-1">Ngày tạo đơn</th>
                         <th class="col-sm-1">Tên khách hàng</th>
                         <th class="col-sm-1">Số điện thoại</th>
                         <th class="col-sm-1">Tổng giá trị</th>
                         <th class="col-sm-1">Đã thanh toán</th>
                         <th class="col-sm-1">Chưa thanh toán</th>
{#                                 <th class="col-sm-1">Ghi chú</th>#}
                      </tr>
                   </thead>
                   <!--Table head-->
                   <!--Table body-->

{#                            a.Donhang_Id, a.Donhang_Name, case a.FlashDesign_Flag when 1 then 'Flash Design' else '' end Flash_Flag, a.Deadline, #}
{#                            d.Workingstatus_Name, a.CreatedDate, c.Customer_Name, c.Customer_Phone, a.Donhang_Price_Combo + a.Donhang_Price_Upsale - a.Donhang_Price_Discount as Total, #}
{#                            a.Donhang_Price_Payment, a.Donhang_Price_Combo + a.Donhang_Price_Upsale - a.Donhang_Price_Discount - a.Donhang_Price_Payment as Deft, '' as Note    #}
                    <tbody>
                        {% for item in list_donhang %}
                            <tr>

                                <td><a href="{% url 'QLBH:donhang_detail' item.Donhang_Id %}">#{{ item.Donhang_Id }}</a><sup><a href="{% url 'QLBH:sua_don_hang' item.Donhang_Id %}"><img src="{% static 'QLBH\img\edit.png' %}" width="15px"></a></sup></td>
                                <td>{{ item.Donhang_Name }}</td>
                                <td>{{ item.Flash_Flag }}</td>
                                <td>{{ item.Deadline|date:"Y-m-d" }}</td>
                                <td>{{ item.Workingstatus_Name }}</td>
                                <td>{{ item.CreatedDate|date:"Y-m-d"}}</td>
                                <td><a href="#">{{ item.Customer_Name }}</a></td>
                                <td>{{ item.Customer_Phone }}</td>
                                <td class="text-right pr-2">{{ item.Total |floatformat:"g"}}</td>
                                <td class="text-right mr-sm-2">{{ item.Donhang_Price_Payment|floatformat:"g"}}</td>
                                <td class="text-right mr-sm-2">{{ item.Deft |floatformat:"g"}}</td>
{#                                        <td>{{ item.Note }}</td>#}

                            </tr>
                        {% endfor %}
                    </tbody>
                   <!--Table body-->
                </table>
             </div>
          </div>
       </div>

    </div>
{% endblock %}

{% block jsscript %}
    <script>


	$('#dataTable').dataTable( {
	   "order": []
	} );

	</script>
{% endblock %}
